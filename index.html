<!DOCTYPE html>
<html lang="ko">

  <!--웹 접속 시 효과음 재생-->
  <audio id="enter" src="audio/enter.mp3" preload="auto"></audio>
  <audio id="inputsound" preload="auto"></audio>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <title>Lethal Company Calculator</title> <!--웹 타이틀 표시내용-->

    <style>

    /*전체 디자인*/

        /*웹 폰트*/
        @font-face {
          font-family: '3270';
          src: url('fonts/3270-Regular.ttf') format('truetype'); /*경로체크!!*/
        }
        
        body {

          /*웹 폰트*/
          font-family: '3270', sans-serif; 
          
          /*배경이미지*/
          margin: 0;
            height: 0vh;
            background: url('bg_width.png') no-repeat center center fixed;
            background-size: cover; /* 이미지가 화면에 맞게 조정 */

          /*전체 글씨 색깔*/
          color: #40FE01;
        }

          /*대제목 디자인*/

          .title {
            text-align: center; /* 가로 가운데 정렬 */
            font-size: 5em; /* 글씨 크기 조정 */
            color: #40FE01; /* 원하는 색상으로 변경 가능 */
            margin-top: 80px; /* 위쪽 여백 조정 */
          }

          /*사용자 입력칸 디자인*/

           #input1 { /*할당량 칸*/
            position: relative;
            background-color: transparent;
            border: none;
            font-size: x-large;
            color: #40FE01;
           }

           #input2 { /*필요한 돈 칸*/
            position: relative;
            background-color: transparent;
            border: none;
            font-size: x-large;
            color: #40FE01;
           }

           #result /*결과값 출력 칸*/
           {
            position: relative;
            background-color: transparent;
            border: none;
            font-size: 4em;
            color: red;
           }

           label { /*칸 소제목*/
            font-size: 3em;
          }

          #calculator {
            position: relative; /* 하위 요소 절대 위치값 설정 */
           }
    </style>
</head>

<!--사용자 텍스트 입력칸-->
<body>
    <div class="container mt-5">
        <h1 class="title"> Challenge Calculator</h1> <!--대제목-->

        <form id="calcForm"> <!--할당량 입력칸-->
            <div class="form-group">
                <label for="input1">Quota</label>
                <input type="number" class="form-control" id="input1" required>
            </div>

            <div class="form-group"> <!--필요한 돈 입력칸-->
                <label for="input2">Amount of Money Required</label>
                <input type="number" class="form-control" id="input2" required>
            </div>

            <div class="form-group"> <!--결과값 출력칸-->
                <label for="result">Amount to Sell</label> 
                <input type="text" class="form-control" id="result" value="____$" readonly>
            </div>
        </form>
    </div>
    
  <!--계산 스크립트-->
    <script src="script.js"></script>

    <script>
      //계산 전 변수 선언
      document.addEventListener('DOMContentLoaded', () => {
        const input1 = document.getElementById('input1');
        const input2 = document.getElementById('input2');
        const result = document.getElementById('result');
        const inputSound = document.getElementById('inputsound');

      //입력한 숫자 계산
        function calculate() {
            const num1 = parseFloat(input1.value.replace(/\$/g, '')) || null; // 할당량
            const num2 = parseFloat(input2.value.replace(/\$/g, '')) || null; // 필요한 돈

            const sum = Math.round(num1 + (5 * num2 + num1 + 75) / 6); // 계산식, A=⌈(5N+Q+75)/6⌉ 으로 구현하기, A: 팔아야 하는 양, N: 필요한 돈, Q: 할당량
            if (num1 === null || num2 === null) { 
              result.value = '____$';
              return;
            }
            result.value = `${sum}$`; // 결과값
        }

      // 사용자 입력값 리스너, 모두 숫자 5자리까지 제한
      input1.addEventListener('input', () => {
    if (input1.value.length > 5) {
        input1.value = input1.value.slice(0, 5);
    }
})
      input2.addEventListener('input', () => {
    if (input2.value.length > 5) {
        input2.value = input1.value.slice(0, 5);
    }
})

    //결과칸 기본값
    document.addEventListener('DOMContentLoaded', () => {
    result.value = '____$';
    });

      //키 입력 사운드 배치
      const soundFiles = [
          'audio/typing_01.mp3',
          'audio/typing_02.mp3',
          'audio/typing_03.mp3',
          'audio/typing_04.mp3',
          'audio/typing_05.mp3',
          'audio/typing_06.mp3',
          'audio/typing_07.mp3'
        ];

       //키 입력 사운드 무작위 재생

       function playRandomSound() {
       const randomIndex = Math.floor(Math.random() * soundFiles.length); // 랜덤 인덱스 생성
            inputSound.src = soundFiles[randomIndex]; // 랜덤 소리 파일 선택
            inputSound.currentTime = 0; // 소리를 처음부터 재생
            inputSound.play().catch(error => {
                console.log('소리 재생 오류:', error);
            });
          }

        input1.addEventListener('input', () => {
            calculate();
            playRandomSound(); // 랜덤 소리 재생
        });

        input2.addEventListener('input', () => {
            calculate();
            playRandomSound(); // 랜덤 소리 재생
        });
      });

    </script>

    <!--접속 시 효과음 재생-->
    <script>
    window.onload = function() {
        const audio = document.getElementById('enter');
        audio.play().catch(error => {
            console.log('오디오 재생 오류:', error);
        });
    };
    </script>
</body>
</html>